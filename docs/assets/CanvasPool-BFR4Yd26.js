import{R as e,ct as t,k as n,mt as r,rt as i}from"./colorToUniform-httQlrui.js";var a={};function o(e,t,n){let r=2166136261;for(let n=0;n<t;n++)r^=e[n].uid,r=Math.imul(r,16777619),r>>>=0;return a[r]||s(e,t,r,n)}function s(e,r,i,o){let s={},c=0;for(let n=0;n<o;n++){let i=n<r?e[n]:t.EMPTY.source;s[c++]=i.source,s[c++]=i.style}let l=new n(s);return a[i]=l,l}var c=new class{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(t,n){let r=e.get().createCanvas();return r.width=t,r.height=n,{canvas:r,context:r.getContext(`2d`)}}getOptimalCanvasAndContext(e,t,n=1){e=Math.ceil(e*n-1e-6),t=Math.ceil(t*n-1e-6),e=r(e),t=r(t);let i=(e<<17)+(t<<1);this._canvasPool[i]||(this._canvasPool[i]=[]);let a=this._canvasPool[i].pop();return a||=this._createCanvasAndContext(e,t),a}returnCanvasAndContext(e){let{width:t,height:n}=e.canvas,r=(t<<17)+(n<<1);e.context.resetTransform(),e.context.clearRect(0,0,t,n),this._canvasPool[r].push(e)}clear(){this._canvasPool={}}};i.register(c);export{o as n,c as t};